
name = "cloudflare-oneclick-worker-deploy"
main = "src/index.ts"
compatibility_date = "2025-12-01"

[vars]
# REQUIRED at runtime (set in Cloudflare UI → Workers → Settings → Variables)
CLARITY_ENDPOINT = ""
# Optional tuning knobs
BATCH_MS = "20000"
BATCH_MAX_REQUESTS = "200"
BACKOFF_BASE_MS = "2000"
BACKOFF_MAX_MS = "60000"

[durable_objects]
bindings = [
  { name = "LOG_DO", class_name = "LogDO" }
]

[[migrations]]
tag = "v1-add-log-do"
new_classes = ["LogDO"]

[observability]
enabled = true
head_sampling_rate = 1.0
